{% extends "public/base/index.html" %}
{% from "public/macros/forms.html" import render_input %}
{% from "public/macros/buttons.html" import render_button %}

{% block title %}Calculator - {{ site_title }}{% endblock %}

{% block content %}
<div class="w-site mx-auto py-8">
    <h1 class="text-3xl lg:text-4xl font-bold text-foreground mb-8 text-center">Armstrong Number Calculator</h1>
    
    <div class="grid lg:grid-cols-2 gap-6 max-w-5xl mx-auto">
        <!-- Check Single Number -->
        <div class="bg-card border border-border rounded-lg shadow-sm p-6">
            <h2 class="text-xl font-semibold text-foreground mb-4 flex items-center gap-2">
                <i class="bx bx-calculator text-primary"></i>
                Check Single Number
            </h2>
            <form method="POST" action="{{ url_for('web.web_public.calculator.check_number') }}" class="space-y-4">
                {{ render_input("number", type="number", placeholder="Enter a number", value=checked_number|default(""), required=True, label="Number") }}
                {{ render_button("Check", type="primary", size="md", classes="w-full", btn_type="submit") }}
            </form>
            
            {% if check_result %}
            <div class="mt-6 p-4 rounded-lg {% if check_result.is_armstrong %}bg-green-50 border border-green-200{% else %}bg-gray-50 border border-gray-200{% endif %}">
                <h3 class="font-semibold text-foreground mb-2">
                    {% if check_result.is_armstrong %}
                        <span class="text-green-600">✓ It is an Armstrong Number!</span>
                    {% else %}
                        <span class="text-gray-600">✗ Not an Armstrong Number</span>
                    {% endif %}
                </h3>
                <p class="text-sm text-muted-foreground font-mono">{{ check_result.calculation }}</p>
            </div>
            {% endif %}
        </div>
        
        <!-- Find in Range -->
        <div class="bg-card border border-border rounded-lg shadow-sm p-6">
            <h2 class="text-xl font-semibold text-foreground mb-4 flex items-center gap-2">
                <i class="bx bx-search text-primary"></i>
                Find in Range
            </h2>
            <form method="POST" action="{{ url_for('web.web_public.calculator.find_range') }}" class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    {{ render_input("min_number", type="number", placeholder="Min", value=min_num|default(""), required=True, label="Minimum") }}
                    {{ render_input("max_number", type="number", placeholder="Max", value=max_num|default(""), required=True, label="Maximum") }}
                </div>
                {{ render_button("Find", type="primary", size="md", classes="w-full", btn_type="submit") }}
            </form>
            
            {% if range_result %}
            <div class="mt-6">
                <h3 class="font-semibold text-foreground mb-3">
                    Found {{ range_result|length }} Armstrong number(s) in range {{ min_num }}-{{ max_num }}:
                </h3>
                <div class="bg-muted rounded-lg p-4 max-h-64 overflow-y-auto">
                    {% if range_result %}
                        <div class="flex flex-wrap gap-2">
                            {% for num in range_result %}
                                <span class="px-3 py-1 bg-primary text-primary-foreground rounded-lg text-sm font-mono">{{ num }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class="text-muted-foreground">No Armstrong numbers found in this range.</p>
                    {% endif %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    
    <!-- Clear Button -->
    <div class="text-center mt-8">
        <a href="{{ url_for('web.web_public.calculator.index') }}" 
           class="px-6 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors inline-block">
            Clear Results
        </a>
    </div>
</div>
{% endblock %}
